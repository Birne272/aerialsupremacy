%a=imread('compass.jpg');
%compass=imshow(a);
Irot = imrotate(I,theta);
Mrot = ~imrotate(true(size(I)),theta);
Irot(Mrot&~imclearborder(Mrot)) = 255;
last=0;
empty=cast(ones(160,160),'uint8');
tic;
shg;
for i=1:1000
	yaw=i;
	if(abs(last-yaw)>5)
		b=imrotate(a,yaw,'nearest','crop');
		set(compass,'CData',b);
		%imshow(b(24:136,24:136,1:3))
		drawnow;
		last=yaw;
	end
end
toc;
tic;
b=imrotate(a,yaw,'nearest','crop');
set(compass,'CData',b);
drawnow;
last=yaw;
toc;